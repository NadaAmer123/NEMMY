<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/nav.css" />
    <style>
      .circle-progress {
        position: relative;
        width: 150px;
        height: 150px;
      }
      .circle-progress svg {
        transform: rotate(-90deg);
      }
      .circle-progress circle {
        fill: none;
        stroke-width: 10;
      }
      .circle-progress .bg {
        stroke: #f3f3f3;
      }
      .circle-progress .progress {
        stroke: #ffc107;
        stroke-dasharray: 440; /* 2 * PI * radius (70) */
        stroke-dashoffset: 440;
        transition: stroke-dashoffset 1s ease;
      }
      .circle-progress .percentage {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        font-weight: bold;
      }
      .conper {
        margin: 50px;
        background-color: #ffff;
        border-radius: 15px;
        height: 80%;
        width: 80%;
        padding: 20px;

      }
      section {
        margin: 0px;
        padding: 0px;
        background-position: center;
        background-size: cover;
        text-align: center;
        display: flex;
        justify-content: center;
        width: 100%;
        height: 100vh;
        align-items: center;
        --color: #e1e1e1;
        background-color: #f3f3f3;
        background-image: linear-gradient(
            0deg,
            transparent 24%,
            var(--color) 25%,
            var(--color) 26%,
            transparent 27%,
            transparent 74%,
            var(--color) 75%,
            var(--color) 76%,
            transparent 77%,
            transparent
          ),
          linear-gradient(
            90deg,
            transparent 24%,
            var(--color) 25%,
            var(--color) 26%,
            transparent 27%,
            transparent 74%,
            var(--color) 75%,
            var(--color) 76%,
            transparent 77%,
            transparent
          );
        background-size: 55px 55px;
      }
      .sciprog{
        text-align: start;
      }
    </style>
  </head>
  <body>
    <header id="header" class="header">
      <ul>
        <a href="person.html" style="text-decoration: none">
          <div
            class="user"
            style="display: flex; align-items: center; font-size: 20px"
          >
            <i class="fa-solid fa-user" style="margin: 0 7px"></i>
            <p>مرحبًا <span id="user-name"></span>!</p>
          </div></a
        >
        <li><a href="#" class="active">الصفحة الرئيسية</a></li>
        <li><a href="#sec">من نحن</a></li>
        <li><a href="#secindex">المواد الدراسية</a></li>
        <li><a href="#footer"> تواصل معنا</a></li>
      </ul>
      <a href="#" class="logo">NEMMY</a>
    </header>
    <section>
      <div class="conper">
        <h1>التقدم</h1>
        <div class="sciprog">
            <h2>مادة العلوم</h2>
            <div class="circle-progress">
                <svg width="150" height="150">
                  <circle class="bg" cx="75" cy="75" r="70"></circle>
                  <circle class="progress" cx="75" cy="75" r="70"></circle>
                </svg>
                <div class="percentage">0%</div>
              </div>
        </div>
      </div>
    </section>

    <script>
      // استرجاع القيم من localStorage
      let sciLessons = parseInt(localStorage.getItem("sciLessons"), 10);
      let lessonCount = parseInt(localStorage.getItem("lessonCount"), 10);

      // التحقق من أن القيم صالحة
      if (!isNaN(sciLessons) && !isNaN(lessonCount) && sciLessons > 0) {
        // حساب النسبة المئوية
        let targetProgressValue = (lessonCount / sciLessons) * 100;
        let currentProgressValue = 0;

        // تحديث دائرة التقدم تدريجياً
        let progressCircle = document.querySelector(
          ".circle-progress .progress"
        );
        let percentageText = document.querySelector(
          ".circle-progress .percentage"
        );

        let interval = setInterval(() => {
          if (currentProgressValue >= targetProgressValue) {
            clearInterval(interval);
          } else {
            currentProgressValue++;
            let offset = 440 - (440 * currentProgressValue) / 100;
            progressCircle.style.strokeDashoffset = offset;
            percentageText.textContent = Math.round(currentProgressValue) + "%";
          }
        }, 20); // تحديث كل 20 مللي ثانية
      } else {
        console.error("تأكد من أن القيم المخزنة في localStorage صالحة.");
      }
    </script>
    <script src="./js/action.js"></script>
  </body>
</html>
