<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/nav.css" />
    <style>
      .circle-progress {
        position: relative;
        width: 150px;
        height: 150px;
      }
      .circle-progress svg {
        transform: rotate(-90deg);
      }
      .circle-progress circle {
        fill: none;
        stroke-width: 10;
      }
      button {
    background-color:tomato;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 18px;
}

      .circle-progress .bg {
        stroke: #f3f3f3;
      }
      .circle-progress .progress {
        stroke: #ffc107;
        stroke-dasharray: 440; /* 2 * PI * radius (70) */
        stroke-dashoffset: 440;
        transition: stroke-dashoffset 1s ease;
      }
      .circle-progress .percentage {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        font-weight: bold;
      }
      .section {
        margin: 50px;
        margin-top: 100px;
        background-color: #ffff;
        border-radius: 15px;
        width: 80%;
        padding: 20px;
        /* display: flex;
        justify-content: space-between; */

      }
      body {
        font-family: "El Messiri", serif;
        margin: 0px;
        padding: 0px;
        background-position: center;
        background-size: cover;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        align-items: center;
        --color: #e1e1e1;
        background-color: #f3f3f3;
        background-image: linear-gradient(
            0deg,
            transparent 24%,
            var(--color) 25%,
            var(--color) 26%,
            transparent 27%,
            transparent 74%,
            var(--color) 75%,
            var(--color) 76%,
            transparent 77%,
            transparent
          ),
          linear-gradient(
            90deg,
            transparent 24%,
            var(--color) 25%,
            var(--color) 26%,
            transparent 27%,
            transparent 74%,
            var(--color) 75%,
            var(--color) 76%,
            transparent 77%,
            transparent
          );
        background-size: 55px 55px;
      }
      .sciprog{
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        width: 30%;
        margin-bottom: 20px;
        font-size: 20px;
      }
      
        .conper{
        font-family: "El Messiri", serif;

          display: flex;
          align-items: center;
          justify-content: space-between;
          flex-wrap: wrap;
        }
        
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link rel="stylesheet" href="./bootstrap-5.3.3-dist/css/bootstrap.min.css">
  </head>
  <body>
    <header id="header" class="header">
      <ul>
        <a href="person.html" style="text-decoration: none">
          <div
            class="user"
            style="display: flex; align-items: center; font-size: 20px"
          >
            <i class="fa-solid fa-user" style="margin: 0 7px"></i>
            <p>مرحبًا <span id="user-name"></span>!</p>
          </div></a
        >
        <li><a href="test1.html" class="active">الصفحة الرئيسية</a></li>
        <li><a href="test1.html#sec">من نحن</a></li>
        <li><a href="test1.html#secindex">المواد الدراسية</a></li>
        <li><a href="chat.html">شات بوت</a></li>

        <li><a href="test1.html#footer"> تواصل معنا</a></li>
      </ul>
      <a href="#" class="logo">NEMMY</a>
    </header>
   
    <section class="section">
      <div class="im" style="display: flex; align-items: center; margin-bottom: 30px;">
        <img src="./images/as.jpg" alt="" srcset="" style="width: 200px; height: 200px; margin-left: 20px;">
        <p style="font-size: 30px;">مرحبا بك في NEMMY</p>
      </div>
      <div class="tab" >
        <table class="table table-striped table-bordered text-center">
          <thead style="background-color: blue;">
            <tr>
              <th>المعلومة</th>
              <th>التفاصيل</th>
              <th>تعديل</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>اسم الطالب</td>
              <td id="username"></td>
              <td><i class="fas fa-edit text-primary" onclick="editField('username', 'username')"></i></td>
            </tr>
            <tr>
              <td>الصف الدراسي</td>
              <td id="year"></td>
              <td><i class="fas fa-edit text-primary" onclick="editField('year', 'year')"></i></td>
            </tr>
            <tr>
              <td>إيميل الطالب</td>
              <td id="student-id"></td>
              <td><i class="fas fa-edit text-primary" onclick="editField('student-id', 'student-id')"></i></td>
            </tr>
            <tr>
              <td>إيميل الوالد</td>
              <td id="parent-id"></td>
              <td><i class="fas fa-edit text-primary" onclick="editField('parent-id', 'parent-id')"></i></td>
            </tr>
           
          </tbody>
        </table>
        
      </div>
      <h1 style="margin-bottom: 20px; font-size: 40px;">التقدم</h1>
      <div class="conper">
        
        <div class="sciprog">
            <h2>مادة الدراسات الاجتماعية</h2>
            <div class="circle-progress">
                <svg width="150" height="150">
                  <circle class="bg" cx="75" cy="75" r="70"></circle>
                  <circle class="progress" cx="75" cy="75" r="70"></circle>
                </svg>
                <div class="percentage">0%</div>
              </div>
        </div>
        <div class="sciprog">
          <h2>اللغة العربية</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 88;"></circle>
            </svg>
            <div class="percentage">80%</div>
          </div>
        </div>
        <div class="sciprog">
          <h2>اللغة الانجليزية</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 242;"></circle>
            </svg>
            <div class="percentage">45%</div>
          </div>
        </div>
        <div class="sciprog">
          <h2>العلوم</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 198;"></circle>
            </svg>
            <div class="percentage">55%</div>
          </div>
        </div>
        <div class="sciprog">
          <h2>التربية الدينية</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 308;"></circle>
            </svg>
            <div class="percentage">30%</div>
          </div>
        </div>
        <div class="sciprog">
          <h2>الرياضيات</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 220;"></circle>
            </svg>
            <div class="percentage">50%</div>
          </div>
        </div>
        <div class="sciprog">
          <h2>الحاسب الالي</h2>
          <div class="circle-progress">
            <svg width="150" height="150">
              <circle class="bg" cx="75" cy="75" r="70"></circle>
              <circle class="progress" cx="75" cy="75" r="70" style="stroke-dashoffset: 295;"></circle>
            </svg>
            <div class="percentage">33%</div>
          </div>
        </div>
        
      </div>
      <div><a href="certificate.html"><button>الشهادة</button></a></div>
    </section>

    <script>
      // استرجاع القيم من localStorage
      let socialLessons = parseInt(localStorage.getItem("socialLessons"), 10);
      let lessonCount = parseInt(localStorage.getItem("lessonCount"), 10);

      // التحقق من أن القيم صالحة
      if (!isNaN(socialLessons) && !isNaN(lessonCount) && socialLessons > 0) {
        // حساب النسبة المئوية
        let targetProgressValue = (lessonCount / socialLessons) * 100;
        let currentProgressValue = 0;

        // تحديث دائرة التقدم تدريجياً
        let progressCircle = document.querySelector(
          ".circle-progress .progress"
        );
        let percentageText = document.querySelector(
          ".circle-progress .percentage"
        );

        let interval = setInterval(() => {
          if (currentProgressValue >= targetProgressValue) {
            clearInterval(interval);
          } else {
            currentProgressValue++;
            let offset = 440 - (440 * currentProgressValue) / 100;
            progressCircle.style.strokeDashoffset = offset;
            percentageText.textContent = Math.round(currentProgressValue) + "%";
          }
        }, 20); // تحديث كل 20 مللي ثانية
      } else {
        console.error("تأكد من أن القيم المخزنة في localStorage صالحة.");
      }
    document.getElementById("username").textContent = localStorage.getItem("username") || "غير متوفر";
    document.getElementById("year").textContent = localStorage.getItem("year") + " year";
    document.getElementById("student-id").textContent = localStorage.getItem("student-id") || "غير متوفر";
    document.getElementById("parent-id").textContent = localStorage.getItem("parent-id") || "غير متوفر";
  
    </script>
    <script src="./js/action.js"></script>
  </body>
</html>
